const int potPin = A0;
const int buttonPin = 2;
const int ledPin = 9;
int potValue = 0;
int brightness = 0;
int savedBrightness = 0;
bool isLocked = false;

void setup() {
  pinMode(ledPin, OUTPUT);
  pinMode(buttonPin, INPUT_PULLUP);
  Serial.begin(9600);
}

void loop() {
  if (digitalRead(buttonPin) == LOW) {
    isLocked = false;
    potValue = analogRead(potPin);
    brightness = map(potValue, 0, 1023, 0, 255);
    analogWrite(ledPin, brightness);
    savedBrightness = brightness;
    Serial.println(potValue);
  } else {
    isLocked = true;
    analogWrite(ledPin, savedBrightness);
    Serial.println("Изменение яркости невозможно!");
  }
  delay(100);
}
